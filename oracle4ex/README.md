# Oracle JDBC Book Records Inserter

A Java application that inserts 100 sample records with random data into an Oracle database BOOK table using JDBC.

## Project Structure

```
oracle4ex/
├── pom.xml                                    # Maven project configuration
├── README.md                                  # This file
├── src/
│   └── main/
│       ├── java/com/oracle/exercise/
│       │   ├── BookInserter.java             # Main application class
│       │   ├── DatabaseConnection.java       # Database connection utility
│       │   ├── Book.java                     # Book entity model
│       │   └── BookDataGenerator.java        # Random data generator
│       └── resources/
│           └── database.properties           # Database configuration
```

## Features

- **Automatic Table Creation**: Creates the BOOK table if it doesn't exist
- **Random Data Generation**: Generates realistic book names and ISBN numbers
- **Batch Processing**: Inserts records in batches for better performance
- **Transaction Management**: Uses transactions with rollback on errors
- **Connection Management**: Proper connection handling and cleanup
- **Verification**: Counts inserted records to verify success
- **Configurable Database**: Database connection via properties file

## Database Schema

The application creates a BOOK table with the following structure:

```sql
CREATE TABLE BOOK (
    ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NAME VARCHAR2(255) NOT NULL,
    ISBN VARCHAR2(20) NOT NULL UNIQUE,
    CREATED_DATE DATE DEFAULT SYSDATE
);
```

## Prerequisites

1. **Java 8** or higher
2. **Maven 3.6** or higher
3. **Oracle Database** (XE, Standard, or Cloud)
4. **Oracle JDBC Driver** (included in dependencies)

## Database Setup

### Option 1: Oracle XE (Express Edition)
1. Download and install Oracle XE
2. Default connection: `localhost:1521:XE`
3. Create a user or use the HR schema

### Option 2: Oracle Cloud
1. Create an Oracle Cloud database instance
2. Update connection URL in `database.properties`

### Option 3: Existing Oracle Database
1. Ensure you have access credentials
2. Update `src/main/resources/database.properties`

## Configuration

Edit `src/main/resources/database.properties`:

```properties
# Database connection URL
db.url=jdbc:oracle:thin:@localhost:1521:XE

# Database credentials
db.username=hr
db.password=hr
```

### Common Connection Examples

**Local Oracle XE:**
```properties
db.url=jdbc:oracle:thin:@localhost:1521:XE
db.username=hr
db.password=hr
```

**Oracle Cloud:**
```properties
db.url=jdbc:oracle:thin:@hostname:1521/servicename
db.username=your_username
db.password=your_password
```

**Oracle with System Account:**
```properties
db.url=jdbc:oracle:thin:@localhost:1521:XE
db.username=system
db.password=password
```

## Building and Running

### Build the Project
```bash
mvn clean compile
```

### Run the Application
```bash
mvn exec:java
```

Or alternatively:
```bash
java -cp target/classes:target/dependency/* com.oracle.exercise.BookInserter
```

### Package as JAR
```bash
mvn clean package
java -jar target/oracle4ex-1.0.0.jar
```

## Expected Output

```
=== Oracle JDBC Book Records Inserter ===
Starting application to insert 100 sample records...
Database properties file not found, using default values
Connecting to database: jdbc:oracle:thin:@localhost:1521:XE
Database connection established successfully!
BOOK table created successfully!
Generating 100 sample books...
Generated 25 books...
Generated 50 books...
Generated 75 books...
Generated 100 books...
Sample books generation completed!
Inserting books into the database...
Inserted 25 books...
Inserted 50 books...
Inserted 75 books...
Inserted 100 books...
All 100 books inserted successfully!
Verification: Total records in BOOK table = 100
✓ Verification successful! At least 100 records found.
Database connection closed successfully
Application completed successfully!
```

## Sample Generated Data

The application generates realistic book data such as:

- "Advanced Machine Learning Principles"
- "The Complete Java Programming Handbook"
- "Modern Web Development Techniques"
- "Essential Database Design Guide"

With corresponding ISBN-13 numbers in format: `978-X-XXX-XXXXX-X`

## Troubleshooting

### Common Issues

**1. Oracle JDBC Driver Not Found**
```
Solution: Ensure Maven downloads dependencies: mvn dependency:resolve
```

**2. Connection Refused**
```
Solution: Verify Oracle database is running and connection details are correct
```

**3. Table Already Exists**
```
This is normal - the application will skip table creation and proceed with insertion
```

**4. ORA-00001: unique constraint violated**
```
Solution: The application generates random ISBNs, but duplicates are possible.
Clear the table or restart with a fresh database.
```

**5. Authentication Failed**
```
Solution: Verify username/password in database.properties
For HR schema: ensure it's unlocked in Oracle
```

### Clearing Data

To clear the BOOK table before running again:
```sql
DELETE FROM BOOK;
COMMIT;
```

Or drop the table:
```sql
DROP TABLE BOOK;
```

## Dependencies

- **Oracle JDBC Driver** (ojdbc8): Oracle database connectivity
- **Apache Commons Lang**: Utility functions (optional, for future enhancements)

## License

This project is created for educational purposes as part of Oracle database exercises.